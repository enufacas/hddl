/* VS Code Workbench Styles - Based on Monaco Editor */

/* ===== CSS CUSTOM PROPERTIES (VS Code Variables) ===== */
:root {
    /* VS Code Color Tokens */
    --vscode-editor-background: #0d1117;
    --vscode-editor-foreground: #e6edf3;
    --vscode-sideBar-background: #010409;
    --vscode-sideBar-foreground: #e6edf3;
    --vscode-sideBar-border: #30363d;
    --vscode-activityBar-background: #010409;
    --vscode-activityBar-foreground: #7d8590;
    --vscode-activityBar-inactiveForeground: #57606a;
    --vscode-activityBar-border: #30363d;
    --vscode-activityBar-activeBorder: #1f6feb;
    --vscode-statusBar-background: #007acc;
    --vscode-statusBar-foreground: #ffffff;
    --vscode-statusBar-border: #30363d;
    --vscode-list-hoverBackground: #1c2128;
    --vscode-list-activeSelectionBackground: #21262d;
    --vscode-list-activeSelectionForeground: #e6edf3;
    --vscode-list-inactiveSelectionBackground: #1c2128;
    --vscode-list-focusOutline: #1f6feb;
    --vscode-button-background: #1f6feb;
    --vscode-button-foreground: #ffffff;
    --vscode-button-hoverBackground: #1a5abb;
    --vscode-focusBorder: #1f6feb;
    --vscode-scrollbar-shadow: rgba(1, 4, 9, 0.8);
    --vscode-scrollbarSlider-background: rgba(125, 133, 144, 0.3);
    --vscode-scrollbarSlider-hoverBackground: rgba(125, 133, 144, 0.5);
    --vscode-scrollbarSlider-activeBackground: rgba(125, 133, 144, 0.7);
    --vscode-input-background: #0d1117;
    --vscode-input-border: #30363d;
    --vscode-inputValidation-infoBorder: #388bfd;
    --vscode-editorWidget-background: #161b22;
    --vscode-editorWidget-border: #30363d;
    --vscode-widget-shadow: rgba(1, 4, 9, 0.5);
    
    /* Layout dimensions */
    --activitybar-width: 0px;
    --sidebar-width: 300px;
    --auxiliarybar-width: 350px;
    --titlebar-height: 35px;
    --statusbar-height: 22px;
    --panel-height: 240px;
    
    /* Glassmorphism tokens */
    --glass-bg: rgba(30, 30, 30, 0.85);
    --glass-bg-light: rgba(255, 255, 255, 0.02);
    --glass-border: rgba(255, 255, 255, 0.06);
    --glass-blur: 12px;
    --glass-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

/* ===== GLASSMORPHISM UTILITIES ===== */
.glass {
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border-color: var(--glass-border);
}

/* Interactive states using color-mix */
.interactive-hover:hover {
    background: color-mix(in srgb, var(--vscode-list-hoverBackground) 100%, transparent);
}

.interactive-active:active {
    background: color-mix(in srgb, var(--vscode-list-activeSelectionBackground) 100%, transparent);
}

/* Focus ring utility */
.focus-ring:focus-visible {
    outline: 2px solid var(--vscode-focusBorder);
    outline-offset: 2px;
}

/* ===== BASE STYLES ===== */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body,
html {
    margin: 0;
    padding: 0;
    font-size: 13px;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif;
    line-height: 1.5;
    color: var(--vscode-editor-foreground);
    background: var(--vscode-editor-background);
    overflow: hidden;
}

/* ===== MONACO WORKBENCH CONTAINER ===== */
.monaco-workbench,
#app {
    display: grid;
    grid-template-rows: var(--titlebar-height) auto 1fr var(--statusbar-height);
    grid-template-columns: 100%;
    height: 100vh;
    width: 100vw;
    position: relative;
    overflow: hidden;
}

/* ===== WORKBENCH GRID (Split View Container) ===== */
.split-view-container,
.monaco-grid-view,
.workbench {
    grid-row: 3;
    display: grid;
    grid-template-columns: 0px var(--sidebar-width) 1fr var(--auxiliarybar-width);
    overflow: hidden;
    position: relative;
    width: 100%;
    height: 100%;
}

/* Hide activity bar globally - using sidebar navigation instead */
.part.activitybar {
    display: none;
}

.split-view-view {
    position: relative;
    overflow: hidden;
}

/* ===== PART: TIMELINE BAR ===== */
.timeline-bar {
    grid-row: 2;
    grid-column: 1 / -1;
    display: flex;
    align-items: center;
    z-index: 60;
    position: relative;
    background: rgba(30, 30, 30, 0.8);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.04);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
}

.timeline-actions {
    display: flex;
    align-items: center;
    gap: 6px;
    flex: 0 0 auto;
    white-space: nowrap;
}

.timeline-actions__buttons {
    display: flex;
    align-items: center;
    gap: 6px;
    position: relative;
}

.timeline-actions__status {
    margin-left: 10px;
    font-size: 11px;
    color: var(--vscode-statusBar-foreground);
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 240px;
}

.timeline-actions__status .timeline-status-link {
    color: inherit;
    text-decoration: underline;
    text-underline-offset: 2px;
}

.timeline-actions__status .timeline-status-link:focus {
    outline: 1px solid var(--vscode-focusBorder);
    outline-offset: 2px;
}

.timeline-legend-button {
    padding: 4px 6px;
    min-width: unset;
}

.timeline-legend {
    position: relative;
    display: flex;
    align-items: center;
}

.timeline-legend-panel {
    position: absolute;
    top: calc(100% + 6px);
    left: 0;
    z-index: 80;
    min-width: 240px;
    max-width: 360px;
    padding: 10px;
    border-radius: 6px;
    border: 1px solid var(--vscode-sideBar-border);
    background: var(--vscode-editorWidget-background);
    color: var(--vscode-editor-foreground);
    font-size: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.22);
}

.timeline-actions-menu {
    position: absolute;
    top: calc(100% + 6px);
    left: 0;
    z-index: 80;
    padding: 6px;
    border-radius: 6px;
    border: 1px solid var(--vscode-sideBar-border);
    background: var(--vscode-editorWidget-background);
    display: flex;
    flex-direction: column;
    gap: 4px;
    min-width: 200px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.22);
}

.timeline-actions-menu[hidden] {
    display: none;
}

.timeline-actions-menu .timeline-action-button {
    width: 100%;
    justify-content: flex-start;
}

.timeline-actions-menu .timeline-action-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.timeline-actions__status[data-kind="error"] {
    color: var(--status-warning);
}

.timeline-action-button {
    padding: 4px 8px;
    font-size: 12px;
    min-height: 26px;
    line-height: 1;
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.timeline-action-button .codicon {
    font-size: 14px;
}

.timeline-action-label {
    font-size: 12px;
}

/* Global timeline: envelope spans overlay */
.timeline-envelope-spans {
    position: absolute;
    inset: 2px 2px 2px 2px;
    pointer-events: none;
    z-index: 0;
}

/* Global timeline: event markers overlay */
.timeline-event-markers {
    position: absolute;
    inset: 2px 2px 2px 2px;
    z-index: 2;
}

/* Global timeline: assumption mismatch markers overlay */
.timeline-mismatch-markers {
    position: absolute;
    inset: 2px 2px 2px 2px;
    z-index: 1;
    pointer-events: auto;
}

.timeline-mismatch-marker {
    position: absolute;
    bottom: 2px;
    width: 8px;
    height: 8px;
    transform: translateX(-3px) rotate(45deg);
    background: var(--status-warning);
    opacity: 0.9;
    border-radius: 1px;
    pointer-events: auto;
    cursor: pointer;
    outline: none;
}

.timeline-mismatch-marker:focus {
    outline: 1px solid var(--vscode-focusBorder);
    outline-offset: 2px;
}

.timeline-mismatch-marker[data-severity="error"] {
    background: var(--status-error);
}

.timeline-event-marker {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 2px;
    transform: translateX(-1px);
    background: var(--status-info);
    opacity: 0.85;
    border-radius: 1px;
    pointer-events: auto;
    cursor: pointer;
}

/* Event-type denotation: distinct palette from steward colors
   Colors must match EVENT_COLORS in steward-colors.js (canonical source)
   TODO: Consider CSS custom properties set dynamically from EVENT_COLORS */
.timeline-event-marker[data-type="signal"] {
    background: #7eb8da;  /* signal - Light steel blue */
    width: 3px;
    transform: translateX(-1.5px);
    opacity: 0.85;
}

.timeline-event-marker[data-type="signal"]::after {
    content: '~';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #ffffff;
    font-size: 10px;
    font-weight: bold;
    text-shadow: 0 0 2px rgba(0, 0, 0, 0.8);
    pointer-events: none;
}

.timeline-event-marker[data-type="revision"] {
    background: #98d4a0;  /* Mint green */
    width: 4px;
    transform: translateX(-2px);
    opacity: 1;
    box-shadow: 0 0 3px rgba(152, 212, 160, 0.6);
}

.timeline-event-marker[data-type="revision"]::after {
    content: '+';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #ffffff;
    font-size: 10px;
    font-weight: bold;
    text-shadow: 0 0 2px rgba(0, 0, 0, 0.8);
    pointer-events: none;
}

.timeline-event-marker[data-type="boundary_interaction"],
.timeline-event-marker[data-type="dsg_session"],
.timeline-event-marker[data-type="dsg_message"] {
    background: #f0b866;  /* Amber */
    width: 3px;
    transform: translateX(-1.5px);
    opacity: 0.9;
}

.timeline-event-marker[data-type="decision"] {
    background: #a8a8a8;  /* Neutral gray */
    width: 2px;
    opacity: 0.55;
}

.timeline-event-marker[data-type="decision"][data-severity="warning"],
.timeline-event-marker[data-type="decision"][data-severity="error"] {
    background: #e8846c;  /* Salmon - blocked */
    opacity: 0.85;
}

.timeline-event-marker[data-type="envelope_promoted"] {
    background: #c4a7e7;  /* Lavender */
    width: 3px;
    transform: translateX(-1.5px);
    opacity: 0.75;
}

.timeline-event-marker[data-type="embedding"] {
    background: #d4a8d4;  /* embedding - Lavender purple (canonical) */
    width: 2px;
    opacity: 0.75;
}

.timeline-event-marker[data-type="retrieval"] {
    background: #b8b8d8;  /* retrieval - Cool gray-purple (canonical) */
    width: 2px;
    opacity: 0.7;
}

.timeline-event-marker[data-type="signal"][data-severity="warning"] {
    background: #e8846c;  /* Salmon */
}

.timeline-event-marker[data-type="annotation"] {
    background: var(--status-muted);
    opacity: 0.65;
    width: 2px;
}

.timeline-envelope-span {
    position: absolute;
    top: 0;
    bottom: 0;
    border-radius: 2px;
    background: var(--vscode-focusBorder);
    opacity: 0.28;
}

/* Envelope accent stripe (uses --envelope-accent supplied by scenario) */
.envelope-card {
    box-shadow: inset 3px 0 0 var(--envelope-accent, var(--status-muted));
}

/* Home: compact sticky actions bar (Add Events To Timeline) */
.home-actions-bar {
    position: sticky;
    bottom: 0;
    z-index: 3;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: 8px 10px;
    margin-top: 8px;
    background: var(--vscode-editor-background);
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 8px;
}

.home-actions-bar__title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 700;
    color: var(--vscode-editor-foreground);
    white-space: nowrap;
}

.home-actions-bar__buttons {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 8px;
    flex-wrap: nowrap;
    min-width: 0;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 2px;
}

.home-actions-bar__buttons .monaco-button {
    padding: 4px 10px;
    font-size: 12px;
    line-height: 1;
    min-height: 26px;
    white-space: nowrap;
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

.home-actions-bar__buttons .monaco-button .codicon {
    font-size: 14px;
}

/* ===== PART: TITLEBAR ===== */
.titlebar {
    grid-row: 1;
    background: var(--vscode-statusBar-background);
    color: var(--vscode-statusBar-foreground);
    border-bottom: 1px solid var(--vscode-statusBar-border);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 16px;
    font-size: 12px;
    font-weight: 400;
    user-select: none;
    -webkit-user-select: none;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

/* ===== PART: ACTIVITYBAR ===== */
.part.activitybar,
.activitybar {
    background: var(--vscode-activityBar-background);
    border-right: 1px solid var(--vscode-activityBar-border);
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px 0;
    position: relative;
    overflow: visible;
}

/* Monaco Action Bar */
.monaco-action-bar {
    width: 100%;
}

.monaco-action-bar .actions-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    padding: 0;
    margin: 0;
    list-style: none;
}

.action-item {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    cursor: pointer;
    border: none;
    background: transparent;
    padding: 0;
}

.action-item.activity-item,
.activity-item {
    color: var(--vscode-activityBar-inactiveForeground);
    transition: color 0.1s ease;
}

.action-item.activity-item:hover,
.activity-item:hover {
    color: var(--vscode-activityBar-foreground);
}

.action-item.activity-item.active,
.action-item.activity-item.checked,
.activity-item.active {
    color: var(--vscode-editor-foreground);
}

.action-item.activity-item.active::before,
.action-item.activity-item.checked::before,
.activity-item.active::before {
    content: '';
    position: absolute;
    left: 0;
    top: 12px;
    bottom: 12px;
    width: 2px;
    background: var(--vscode-activityBar-activeBorder);
}

/* Codicon Icons */
.codicon {
    font-size: 24px;
    line-height: 1;
    display: inline-block;
    font-family: codicon;
    font-style: normal;
    font-weight: normal;
}

/* ===== PART: SIDEBAR ===== */
.part.sidebar,
.sidebar {
    background: var(--vscode-sideBar-background);
    border-right: 1px solid var(--vscode-sideBar-border);
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
    transition: box-shadow 0.2s ease;
}

/* Subtle inner gradient for depth */
.part.sidebar::before,
.sidebar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.02) 0%, transparent 100%);
    pointer-events: none;
    z-index: 1;
}

/* Focus state - subtle glow when interacting */
.part.sidebar:focus-within,
.sidebar:focus-within {
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.05);
}

.composite.title,
.sidebar-header {
    padding: 8px 16px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    color: var(--vscode-statusBar-foreground);
    letter-spacing: 0.5px;
    border-bottom: 1px solid var(--vscode-sideBar-border);
    background: var(--vscode-sideBar-background);
    flex-shrink: 0;
}

.content,
.sidebar-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
}

/* Monaco List */
.monaco-list {
    position: relative;
    height: 100%;
    width: 100%;
    white-space: nowrap;
}

.monaco-list .monaco-scrollable-element {
    height: 100%;
}

/* ===== SIDEBAR: STEWARD FLEETS ===== */
.sidebar-fleets {
    margin: 10px 8px 12px;
    padding-top: 10px;
    border-top: 1px solid var(--vscode-sideBar-border);
}

.sidebar-fleets__hdr {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 2px 8px;
    color: var(--vscode-statusBar-foreground);
}

.sidebar-fleets__title {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.sidebar-fleets__meta {
    margin-left: auto;
    font-size: 11px;
    opacity: 0.85;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

.sidebar-fleets__body {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.sidebar-fleets__empty {
    font-size: 12px;
    color: var(--vscode-statusBar-foreground);
    opacity: 0.9;
}

.fleet-group {
    background: var(--vscode-sideBar-background);
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 8px;
    padding: 10px;
}

.fleet-group.active {
    border-color: var(--vscode-focusBorder);
}

.fleet-group__hdr {
    display: flex;
    justify-content: space-between;
    gap: 10px;
    align-items: baseline;
    margin-bottom: 8px;
}

.fleet-group__name {
    font-size: 12px;
    font-weight: 600;
    color: var(--vscode-editor-foreground);
}

.fleet-group__count {
    font-size: 11px;
    color: var(--vscode-statusBar-foreground);
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

.fleet-group__chips {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.fleet-agent {
    display: inline-flex;
    align-items: center;
    border-radius: 999px;
    padding: 2px 8px;
    font-size: 11px;
    border: 1px solid var(--vscode-sideBar-border);
    background: var(--vscode-editor-background);
    color: var(--vscode-statusBar-foreground);
    line-height: 1.6;
}

.fleet-agent.active {
    border-color: var(--status-info);
    color: var(--vscode-editor-foreground);
}

.monaco-list-rows,
.nav-list {
    position: relative;
    width: 100%;
    height: 100%;
    list-style: none;
    padding: 0;
    margin: 0;
}

.monaco-list-row,
.nav-item {
    position: relative;
    box-sizing: border-box;
    overflow: hidden;
    width: 100%;
    display: flex;
    align-items: center;
    padding: 4px 16px;
    cursor: pointer;
    color: var(--vscode-sideBar-foreground);
    transition: background-color 0.1s ease;
    height: 22px;
    line-height: 22px;
    user-select: none;
    -webkit-user-select: none;
}

.monaco-list:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused),
.nav-item:hover {
    background: var(--vscode-list-hoverBackground);
}

.monaco-list-row.focused,
.monaco-list-row.selected,
.nav-item.active {
    background: var(--vscode-list-activeSelectionBackground);
    color: var(--vscode-list-activeSelectionForeground);
}

.monaco-list:focus .monaco-list-row.focused {
    outline: 1px solid var(--vscode-list-focusOutline);
    outline-offset: -1px;
}

.nav-item-icon {
    margin-right: 8px;
    font-size: 16px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
}

/* ===== PART: EDITOR ===== */
.part.editor,
.editor-area {
    background: var(--vscode-editor-background);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    position: relative;
}

#editor-area,
.editor-container {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    position: relative;
}

/* ===== PART: AUXILIARYBAR ===== */
.part.auxiliarybar,
.auxiliarybar {
    background: var(--vscode-sideBar-background);
    border-left: 1px solid var(--vscode-sideBar-border);
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
    transition: box-shadow 0.2s ease;
}

/* Subtle inner gradient for depth */
.part.auxiliarybar::before,
.auxiliarybar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 60px;
    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.02) 0%, transparent 100%);
    pointer-events: none;
    z-index: 1;
}

/* Focus state - subtle glow when interacting */
.part.auxiliarybar:focus-within,
.auxiliarybar:focus-within {
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.05);
}

.auxiliary-header {
    padding: 8px 16px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--vscode-statusBar-foreground);
    border-bottom: 1px solid var(--vscode-sideBar-border);
    flex-shrink: 0;
}

.auxiliary-content {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
}

/* Telemetry Panel */
.telemetry-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
}

.telemetry-metric {
    background: var(--vscode-editor-background);
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 6px;
    padding: 12px;
}

.metric-label {
    font-size: 11px;
    color: var(--vscode-statusBar-foreground);
    margin-bottom: 4px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.metric-value {
    font-size: 20px;
    font-weight: 600;
    color: var(--vscode-editor-foreground);
}

.metric-trend {
    font-size: 11px;
    margin-top: 4px;
}

.trend-positive {
    color: #3fb950;
}

.trend-negative {
    color: #f85149;
}

/* ===== PART: STATUSBAR ===== */
.part.statusbar,
.statusbar {
    grid-row: 4;
    background: rgba(0, 122, 204, 0.9);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 12px;
    font-size: 12px;
    color: var(--vscode-statusBar-foreground);
    height: var(--statusbar-height);
    user-select: none;
    -webkit-user-select: none;
}

.items-container,
.status-left,
.status-right {
    display: flex;
    align-items: center;
    gap: 12px;
}

.statusbar-item,
.status-item {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 0 8px;
    height: 100%;
}

.statusbar-item-label {
    display: flex;
    align-items: center;
    gap: 4px;
}

/* ===== MONACO SCROLLABLE ELEMENT ===== */
.monaco-scrollable-element {
    position: relative;
    overflow: hidden;
}

.monaco-scrollable-element > .scrollbar {
    position: absolute;
    z-index: 10;
    background: transparent;
}

.monaco-scrollable-element > .scrollbar.vertical {
    width: 10px;
    right: 0;
    top: 0;
}

.monaco-scrollable-element > .scrollbar.horizontal {
    height: 10px;
    bottom: 0;
    left: 0;
}

.monaco-scrollable-element > .invisible.scrollbar {
    opacity: 0;
    pointer-events: none;
}

.monaco-scrollable-element > .visible.scrollbar {
    opacity: 1;
    transition: opacity 0.1s linear;
    z-index: 11;
}

.monaco-scrollable-element > .invisible.fade {
    transition: opacity 0.8s linear;
}

.monaco-scrollable-element > .scrollbar > .slider {
    position: absolute;
    background: var(--vscode-scrollbarSlider-background);
    border-radius: 5px;
}

.monaco-scrollable-element > .scrollbar > .slider:hover {
    background: var(--vscode-scrollbarSlider-hoverBackground);
}

.monaco-scrollable-element > .scrollbar > .slider.active {
    background: var(--vscode-scrollbarSlider-activeBackground);
}

/* Custom Scrollbars */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: var(--vscode-scrollbarSlider-background);
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--vscode-scrollbarSlider-hoverBackground);
}

::-webkit-scrollbar-thumb:active {
    background: var(--vscode-scrollbarSlider-activeBackground);
}

/* ===== PAGE CONTAINER ===== */
.page-container {
    padding: 24px;
    max-width: 1600px;  /* Increased to give map more room on wide screens */
    margin: 0 auto;
}

/* Fleets page should use the full editor width (avoid centered narrow column) */
.page-container[data-testid="fleets-page"] {
    max-width: none;
    margin: 0;
}

/* Home page should also use full width to give map proper desktop space */
.page-container[data-testid="home-page"] {
    max-width: none;
    margin: 0;
    padding-bottom: 0;
}

.page-container h1 {
    font-size: 32px;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--vscode-editor-foreground);
}

.page-container h2 {
    font-size: 24px;
    font-weight: 600;
    margin: 24px 0 12px;
    color: var(--vscode-editor-foreground);
}

.page-container p {
    color: var(--vscode-statusBar-foreground);
    margin-bottom: 16px;
    line-height: 1.6;
}

/* ===== DOCS PAGE (In-app /docs) ===== */
.page-container .docs-hero {
    text-align: center;
    margin-bottom: 24px;
    padding: 18px 16px;
    border-radius: 10px;
    border: 1px solid var(--vscode-sideBar-border);
    background: linear-gradient(
        135deg,
        color-mix(in srgb, var(--status-info) 12%, var(--vscode-editorWidget-background)),
        color-mix(in srgb, var(--status-success) 10%, var(--vscode-editorWidget-background))
    );
}

.page-container .docs-hero h1 {
    margin: 0 0 8px;
}

.page-container .hero-subtitle {
    margin: 0 0 10px;
    color: var(--vscode-statusBar-foreground);
}

.page-container .hero-description {
    max-width: 760px;
    margin: 0 auto;
    color: var(--vscode-editor-foreground);
    line-height: 1.7;
}

.page-container .docs-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 18px;
    margin: 18px 0;
}

.page-container .docs-section {
    background: var(--vscode-editorWidget-background);
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 10px;
    padding: 16px;
}

.page-container .section-header {
    margin-bottom: 12px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--vscode-sideBar-border);
}

.page-container .section-header h2 {
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 0 0 6px;
}

.page-container .section-desc {
    margin: 0;
    color: var(--vscode-statusBar-foreground);
}

.page-container .docs-links {
    display: grid;
    gap: 8px;
}

.page-container a.doc-link {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 14px;
    background: var(--vscode-editor-background);
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 8px;
    color: var(--vscode-editor-foreground);
    text-decoration: none;
    position: relative;
    overflow: hidden;
    transition: transform 0.15s ease, background-color 0.15s ease, border-color 0.15s ease;
}

.page-container a.doc-link::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    width: 3px;
    background: linear-gradient(180deg, var(--status-info), var(--status-success));
    transform: scaleY(0);
    transform-origin: top;
    transition: transform 0.15s ease;
}

.page-container a.doc-link:hover {
    transform: translateX(2px);
    border-color: var(--vscode-focusBorder);
    background: color-mix(in srgb, var(--status-info) 10%, var(--vscode-editor-background));
    box-shadow: 0 2px 8px rgba(0,0,0,0.22);
}

.page-container a.doc-link:hover::before {
    transform: scaleY(1);
}

.page-container .doc-icon {
    font-size: 20px;
    flex-shrink: 0;
}

.page-container .doc-content {
    flex: 1;
    min-width: 0;
}

.page-container .doc-title {
    font-weight: 600;
    margin-bottom: 2px;
}

.page-container .doc-desc {
    font-size: 12px;
    color: var(--vscode-statusBar-foreground);
    line-height: 1.5;
}

.page-container .doc-arrow {
    color: var(--vscode-statusBar-foreground);
    opacity: 0;
    transform: translateX(-2px);
    transition: opacity 0.15s ease, transform 0.15s ease;
    flex-shrink: 0;
}

.page-container a.doc-link:hover .doc-arrow {
    opacity: 1;
    transform: translateX(2px);
}

/* ===== DOCS: MARKDOWN VIEWER MODAL ===== */
.markdown-viewer {
    position: fixed;
    inset: 0;
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.2s ease;
}

.markdown-viewer.visible {
    opacity: 1;
}

.markdown-viewer.closing {
    opacity: 0;
}

.markdown-viewer-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.70);
}

.markdown-viewer-content {
    position: relative;
    width: min(980px, 94vw);
    max-height: 86vh;
    background: var(--vscode-editorWidget-background);
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    box-shadow: 0 6px 22px rgba(0,0,0,0.35);
    transform: scale(0.98);
    transition: transform 0.2s ease;
}

.markdown-viewer.visible .markdown-viewer-content {
    transform: scale(1);
}

.markdown-viewer-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
    padding: 12px 14px;
    border-bottom: 1px solid var(--vscode-sideBar-border);
}

.markdown-viewer-header h2 {
    margin: 0;
    font-size: 14px;
    font-weight: 600;
    color: var(--vscode-editor-foreground);
}

.markdown-viewer-close {
    background: transparent;
    border: 1px solid transparent;
    border-radius: 6px;
    color: var(--vscode-editor-foreground);
    cursor: pointer;
    padding: 6px 8px;
}

.markdown-viewer-close:hover {
    background: var(--vscode-list-hoverBackground);
    border-color: var(--vscode-sideBar-border);
}

.markdown-viewer-body {
    flex: 1;
    overflow: auto;
    padding: 14px;
    line-height: 1.75;
}

.markdown-viewer-body h1 {
    font-size: 18px;
    margin: 0 0 10px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--vscode-sideBar-border);
}

.markdown-viewer-body h2 {
    font-size: 16px;
    margin: 18px 0 8px;
}

.markdown-viewer-body h3 {
    font-size: 14px;
    margin: 14px 0 6px;
}

.markdown-viewer-body p {
    margin: 0 0 10px;
    color: var(--vscode-editor-foreground);
}

.markdown-viewer-body code {
    background: var(--vscode-input-background);
    border: 1px solid var(--vscode-input-border);
    padding: 0 4px;
    border-radius: 4px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 12px;
}

.markdown-viewer-body pre {
    background: var(--vscode-editor-background);
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 6px;
    padding: 10px;
    overflow: auto;
    margin: 10px 0;
}

.markdown-viewer-body pre code {
    background: transparent;
    border: none;
    padding: 0;
}

.markdown-viewer-body ul {
    margin: 0 0 10px 18px;
}

.markdown-viewer-body li {
    margin-bottom: 6px;
}

.markdown-viewer-body a {
    color: var(--status-info);
    text-decoration: underline;
    text-underline-offset: 2px;
}

.loading-spinner {
    text-align: center;
    padding: 24px;
    color: var(--vscode-statusBar-foreground);
}

/* ===== STEWARD AGENT FLEETS PAGE ===== */
.fleet-page__top {
    display: flex;
    gap: 16px;
    align-items: flex-start;
    justify-content: space-between;
    flex-wrap: wrap;
}

.fleet-page__top-left {
    flex: 1;
    min-width: 320px;
}

.fleet-page__top-right {
    flex: 1;
    min-width: 420px;
    max-width: 760px;
}

.fleet-page__summary {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    margin: 0 0 12px;
    padding: 12px;
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 6px;
    background: var(--vscode-editorWidget-background);
}

.fleet-page__summary-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
    min-width: 180px;
}

.fleet-page__k {
    font-size: 11px;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    color: var(--vscode-statusBar-foreground);
}

.fleet-page__v {
    font-size: 13px;
    font-weight: 600;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    color: var(--vscode-editor-foreground);
}

.fleet-page__active {
    display: flex;
    gap: 12px;
    margin: 0 0 18px;
    flex-wrap: nowrap;
    align-items: stretch;
    min-width: 0;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 4px;
}

.fleet-page__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 12px;
}

.fleet-page__empty {
    padding: 12px;
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 6px;
    background: var(--vscode-editorWidget-background);
    color: var(--vscode-statusBar-foreground);
}

.fleet-env {
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 10px;
    padding: 10px;
    background: var(--vscode-sideBar-background);
    box-shadow: inset 3px 0 0 var(--env-accent, var(--status-muted));

    /* Single-row strip behavior: shrink instead of wrapping. */
    flex: 1 1 0;
    min-width: 150px;
    max-width: 420px;
    overflow: hidden;
}

.fleet-env__id {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 11px;
    color: var(--vscode-statusBar-foreground);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.fleet-env__name {
    font-size: 13px;
    font-weight: 700;
    margin-top: 2px;
    color: var(--vscode-editor-foreground);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.fleet-env__meta {
    margin-top: 4px;
    font-size: 12px;
    color: var(--vscode-statusBar-foreground);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.fleet-card {
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 10px;
    background: var(--vscode-sideBar-background);
    overflow: hidden;
}

.fleet-card.is-inactive {
    opacity: 0.55;
    filter: saturate(0.65);
}

.fleet-card__hdr {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    gap: 10px;
    padding: 8px 10px;
    border-bottom: 1px solid var(--vscode-sideBar-border);
    background: var(--vscode-editorWidget-background);
}

.fleet-card__title {
    font-size: 12.5px;
    font-weight: 700;
    color: var(--vscode-editor-foreground);
}

.fleet-card__meta {
    font-size: 11px;
    color: var(--vscode-statusBar-foreground);
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

.fleet-card__body {
    padding: 10px;
}

.fleet-agent-icons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
}

.fleet-agent-icon {
    border: 1px solid var(--vscode-sideBar-border);
    background: var(--vscode-editor-background);
    border-radius: 8px;
    padding: 6px 4px 5px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 4px;
    min-height: 42px;
    user-select: none;
}

.fleet-agent-icon.active {
    border-color: var(--vscode-focusBorder);
}

.fleet-agent-icon__glyph {
    width: 20px;
    height: 20px;
    border-radius: 999px;
    border: 1px solid var(--vscode-sideBar-border);
    background: var(--vscode-editorWidget-background);
    color: var(--vscode-editor-foreground);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    font-weight: 700;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
}

.fleet-agent-icon.active .fleet-agent-icon__glyph {
    border-color: var(--vscode-focusBorder);
}

.fleet-agent-icon__label {
    font-size: 10px;
    line-height: 1.1;
    color: var(--vscode-statusBar-foreground);
    text-align: center;
    max-width: 100%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* ===== VISUALIZATIONS ===== */
.viz-container {
    position: relative;
    overflow: auto;
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 6px;
    background: var(--vscode-editorWidget-background);
    padding: 12px;
}

.matrix-tooltip {
    position: absolute;
    display: none;
    pointer-events: none;
    z-index: 10;
    max-width: 260px;
    background: var(--vscode-editorWidget-background);
    border: 1px solid var(--vscode-editorWidget-border);
    border-radius: 6px;
    padding: 10px 12px;
    color: var(--vscode-editor-foreground);
}

/* ===== DSG EVENT ===== */
.dsg-container {
    background: var(--vscode-editorWidget-background);
    border: 1px solid var(--vscode-editorWidget-border);
    border-radius: 8px;
    padding: 16px;
}

.dsg-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: 16px;
    padding-bottom: 12px;
    margin-bottom: 16px;
    border-bottom: 1px solid var(--vscode-sideBar-border);
}

.dsg-header h3 {
    margin: 0 0 4px 0;
    font-size: 14px;
}

.dsg-header p {
    margin: 0;
    font-size: 12px;
    color: var(--vscode-statusBar-foreground);
}

.dsg-timer {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    color: var(--vscode-statusBar-foreground);
    white-space: nowrap;
}

.dsg-main {
    display: grid;
    grid-template-columns: 1fr 360px;
    gap: 16px;
}

.dsg-discussion,
.dsg-section {
    background: var(--vscode-sideBar-background);
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 8px;
    padding: 12px;
}

.dsg-discussion h3,
.dsg-section h3 {
    margin: 0 0 10px 0;
    font-size: 13px;
    font-weight: 600;
}

.discussion-feed {
    height: 260px;
    overflow: auto;
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 6px;
    background: var(--vscode-editor-background);
    padding: 10px;
}

.message {
    padding: 8px 10px;
    border: 1px solid transparent;
    border-radius: 6px;
    margin-bottom: 8px;
    background: var(--vscode-sideBar-background);
}

.message-header {
    display: flex;
    justify-content: space-between;
    gap: 12px;
    margin-bottom: 4px;
    color: var(--vscode-statusBar-foreground);
    font-size: 11px;
}

.message-author {
    color: var(--vscode-editor-foreground);
    font-weight: 600;
}

.message-text {
    font-size: 12px;
    color: var(--vscode-editor-foreground);
}

.discussion-input {
    display: flex;
    gap: 8px;
    margin-top: 10px;
}

.discussion-input input {
    flex: 1;
    background: var(--vscode-input-background);
    color: var(--vscode-editor-foreground);
    border: 1px solid var(--vscode-input-border);
    border-radius: 6px;
    padding: 8px 10px;
    font-size: 12px;
}

.discussion-input input:focus {
    outline: 1px solid var(--vscode-focusBorder);
    outline-offset: 0;
}

.discussion-input button,
.dsg-actions .action-btn,
.adjust-btn {
    background: var(--vscode-button-background);
    color: var(--vscode-button-foreground);
    border: 1px solid transparent;
    border-radius: 6px;
    padding: 8px 10px;
    font-size: 12px;
    cursor: pointer;
}

.discussion-input button:hover,
.dsg-actions .action-btn:hover,
.adjust-btn:hover {
    background: var(--vscode-button-hoverBackground);
}

.dsg-sidebar {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.case-card {
    font-size: 12px;
    color: var(--vscode-statusBar-foreground);
}

.case-card h4 {
    margin: 0 0 8px 0;
    color: var(--vscode-editor-foreground);
}

.case-card strong {
    color: var(--vscode-editor-foreground);
    font-weight: 600;
}

.steward-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.steward-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px;
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 6px;
    background: var(--vscode-editor-background);
}

.steward-avatar {
    width: 26px;
    height: 26px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    color: #fff;
}

.steward-role {
    font-size: 11px;
    color: var(--vscode-statusBar-foreground);
}

.steward-status {
    margin-left: auto;
    font-size: 11px;
    padding: 2px 8px;
    border-radius: 999px;
    border: 1px solid var(--vscode-sideBar-border);
    color: var(--vscode-statusBar-foreground);
    text-transform: capitalize;
}

.steward-status.active {
    color: var(--status-success);
    border-color: var(--status-success);
}

.dsg-actions {
    display: flex;
    gap: 8px;
    justify-content: flex-end;
    margin-top: 14px;
}

@media (max-width: 1100px) {
    .dsg-main {
        grid-template-columns: 1fr;
    }
}

/* ===== CARDS ===== */
.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 16px;
    margin-bottom: 32px;
}

.card {
    background: var(--vscode-sideBar-background);
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 6px;
    padding: 16px;
    cursor: pointer;
    transition: all 0.1s ease;
}

.card:hover {
    background: var(--vscode-list-hoverBackground);
    border-color: var(--vscode-focusBorder);
    transform: translateY(-2px);
}

.card h3 {
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--vscode-editor-foreground);
}

.card p {
    font-size: 13px;
    color: var(--vscode-statusBar-foreground);
    margin: 0;
    line-height: 1.5;
}

/* ===== BUTTONS (Monaco Button) ===== */
.monaco-button,
.monaco-text-button,
.btn {
    box-sizing: border-box;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px 14px;
    border-radius: 2px;
    border: 1px solid transparent;
    background: var(--vscode-button-background);
    color: var(--vscode-button-foreground);
    font-size: 13px;
    font-family: inherit;
    line-height: 18px;
    cursor: pointer;
    transition: background-color 0.1s ease;
    text-align: center;
    user-select: none;
    -webkit-user-select: none;
}

.monaco-button:hover,
.monaco-text-button:hover,
.btn:hover {
    background: var(--vscode-button-hoverBackground);
    text-decoration: none;
}

.monaco-button:focus,
.monaco-text-button:focus,
.btn:focus {
    outline: 1px solid var(--vscode-focusBorder);
    outline-offset: 2px;
}

.monaco-button .codicon,
.monaco-text-button .codicon {
    margin: 0 4px;
    color: inherit;
}

/* ===== MONACO SASH (Resizable Dividers) ===== */
.monaco-sash {
    position: absolute;
    z-index: 35;
    touch-action: none;
}

.monaco-sash.vertical {
    cursor: ew-resize;
    top: 0;
    width: 4px;
    height: 100%;
}

.monaco-sash.horizontal {
    cursor: ns-resize;
    left: 0;
    width: 100%;
    height: 4px;
}

.monaco-sash:before {
    content: '';
    pointer-events: none;
    position: absolute;
    width: 100%;
    height: 100%;
    background: transparent;
}

.monaco-enable-motion .monaco-sash:before {
    transition: background-color 0.1s ease-out;
}

.monaco-sash.hover:before,
.monaco-sash.active:before {
    background: var(--vscode-focusBorder);
}

.monaco-sash.vertical:before {
    width: 4px;
    left: calc(50% - 2px);
}

.monaco-sash.horizontal:before {
    height: 4px;
    top: calc(50% - 2px);
}

/* ===== UTILITY CLASSES ===== */
.hidden {
    display: none !important;
}

.invisible {
    visibility: hidden !important;
}

.disabled {
    opacity: 0.4;
    cursor: default !important;
    pointer-events: none;
}

/* ===== STATUS COLORS ===== */
:root {
    --status-success: #3fb950;
    --status-error: #f85149;
    --status-warning: #d29922;
    --status-info: #58a6ff;
    --status-muted: #7d8590;
}

.success,
.metric-value.success {
    color: var(--status-success) !important;
}

.error,
.metric-value.error {
    color: var(--status-error) !important;
}

.warning,
.metric-value.warning {
    color: var(--status-warning) !important;
}

.info,
.metric-value.info {
    color: var(--status-info) !important;
}

.muted,
.metric-value.muted {
    color: var(--status-muted) !important;
}

/* ===== SECTION HEADERS ===== */
.section-header {
    background: var(--vscode-sideBar-background);
    user-select: none;
    -webkit-user-select: none;
}

.section-header:hover {
    background: var(--vscode-list-hoverBackground);
}

/* ===== TELEMETRY ENHANCEMENTS ===== */
.telemetry-section {
    border-bottom: 1px solid var(--vscode-sideBar-border);
}

.telemetry-section:last-child {
    border-bottom: none;
}

.telemetry-metric {
    transition: background-color 0.1s ease;
}

.telemetry-metric:hover {
    background: var(--vscode-list-hoverBackground);
    border-radius: 3px;
}

/* ===== WORKBENCH GRID ADJUSTMENTS ===== */
.workbench.split-view-container {
    display: grid;
    position: relative;
    grid-template-columns: var(--activitybar-width) var(--sidebar-width) 1fr var(--auxiliarybar-width);
    grid-template-rows: 1fr var(--panel-height);
}

/* Default-collapsed panels (persisted via body classes) */
body.sidebar-hidden {
    --sidebar-width: 0px;
}

body.sidebar-hidden .part.sidebar {
    display: none !important;
}

body.aux-hidden {
    --auxiliarybar-width: 0px;
}

body.aux-hidden .part.auxiliarybar {
    display: none !important;
}

body.panel-hidden {
    --panel-height: 0px;
}

body.panel-hidden .part.panel {
    display: none !important;
}

.part {
    position: relative;
    flex-shrink: 0;
}

/* Activity bar is hidden - kept for reference but not displayed */
.part.activitybar {
    display: none !important;
}

.part.sidebar {
    width: var(--sidebar-width);
    grid-column: 2;
    grid-row: 1 / span 2;
}

.part.editor {
    grid-column: 3;
    grid-row: 1;
    min-width: 0;
    position: relative;
}

.part.auxiliarybar {
    width: var(--auxiliarybar-width);
    grid-column: 4;
    grid-row: 1 / span 2;
}

body.aux-hidden .part.auxiliarybar {
    display: none;
}

/* Discoverability handle for collapsed sidebar */
.sidebar-peek {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 28px;
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    background: transparent;
    border-right: 2px solid transparent;
    color: var(--vscode-activityBar-inactiveForeground);
    cursor: pointer;
    user-select: none;
    z-index: 100;
    transition: all 0.2s ease;
    box-shadow: none;
}

body.sidebar-hidden .sidebar-peek {
    display: flex !important;
}

.sidebar-peek:hover {
    background: var(--vscode-activityBar-inactiveForeground);
    width: 32px;
    border-right-color: var(--vscode-activityBarBadge-background);
    color: var(--vscode-activityBar-background);
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.4);
}

.sidebar-peek:focus {
    outline: 2px solid var(--vscode-focusBorder);
    outline-offset: -2px;
}

.sidebar-peek__label {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 1px;
    text-transform: uppercase;
}

.sidebar-peek .codicon {
    font-size: 16px;
}

/* Discoverability handle for collapsed auxiliary bar */
.aux-peek {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    width: 28px;
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 8px;
    background: transparent;
    border-left: 2px solid transparent;
    color: var(--vscode-activityBar-inactiveForeground);
    cursor: pointer;
    user-select: none;
    z-index: 100;
    transition: all 0.2s ease;
    box-shadow: none;
}

body.aux-hidden .aux-peek {
    display: flex !important;
}

.aux-peek:hover {
    background: var(--vscode-activityBar-inactiveForeground);
    width: 32px;
    border-left-color: var(--vscode-activityBarBadge-background);
    color: var(--vscode-activityBar-background);
    box-shadow: -2px 0 10px rgba(0, 0, 0, 0.4);
}

.aux-peek:focus {
    outline: 2px solid var(--vscode-focusBorder);
    outline-offset: -2px;
}

.aux-peek__label {
    writing-mode: vertical-rl;
    text-orientation: mixed;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 1px;
    text-transform: uppercase;
}

.aux-peek .codicon {
    font-size: 16px;
}


/* Bottom panel (Terminal) stays under editor only (not under auxiliary) */
.part.panel {
    grid-column: 3 / 4;
    grid-row: 2;
    border-top: 1px solid var(--vscode-sideBar-border);
    background: var(--vscode-sideBar-background);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    min-height: 0;
}

body.panel-hidden .part.panel {
    display: none;
}

/* If the auxiliary bar is closed, let the panel expand to the right edge. */
body.aux-hidden .part.panel {
    grid-column: 3 / 5;
}

.panel-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: 6px 10px;
    border-bottom: 1px solid var(--vscode-sideBar-border);
    background: var(--vscode-editorWidget-background);
}

.panel-tabs {
    display: flex;
    gap: 14px;
    align-items: center;
    overflow: hidden;
}

.panel-tab {
    appearance: none;
    border: none;
    background: transparent;
    color: var(--vscode-statusBar-foreground);
    font-size: 11px;
    letter-spacing: 0.6px;
    text-transform: uppercase;
    padding: 6px 2px 5px;
    cursor: default;
    border-bottom: 1px solid transparent;
}

.panel-tab.active {
    color: var(--vscode-editor-foreground);
    border-bottom-color: var(--vscode-focusBorder);
}

.panel-actions {
    display: flex;
    align-items: center;
}

.panel-action {
    appearance: none;
    border: none;
    background: transparent;
    color: var(--vscode-statusBar-foreground);
    cursor: pointer;
    padding: 4px 6px;
    border-radius: 4px;
}

.panel-action:hover {
    background: var(--vscode-list-hoverBackground);
    color: var(--vscode-editor-foreground);
}

.panel-body {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: var(--vscode-editor-background);
    min-height: 0;
    overflow: hidden;
}

.glossary-term {
    color: var(--vscode-textLink-foreground);
    text-decoration: underline;
    text-underline-offset: 2px;
}

.glossary-term:hover {
    color: var(--vscode-textLink-activeForeground);
}

.terminal-output {
    flex: 1;
    overflow: auto;
    padding: 10px 12px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 12px;
    color: var(--vscode-editor-foreground);
    min-height: 0;
}

.terminal-line {
    white-space: pre-wrap;
    line-height: 1.45;
    margin-bottom: 2px;
}

.terminal-line--muted {
    color: var(--vscode-statusBar-foreground);
}

.terminal-line--warning {
    color: var(--status-warning);
}

.terminal-line--info {
    color: var(--vscode-editor-foreground);
}

.terminal-line--cmd {
    color: var(--vscode-editor-foreground);
}

.terminal-input-row {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 12px;
    border-top: 1px solid var(--vscode-sideBar-border);
    background: var(--vscode-editorWidget-background);
}

.terminal-prompt {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 12px;
    color: var(--vscode-statusBar-foreground);
    white-space: nowrap;
}

.terminal-input {
    flex: 1;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 12px;
    color: var(--vscode-editor-foreground);
    background: transparent;
    border: none;
    outline: none;
}

/* ===== SASH POSITIONING ===== */
/* Sashes need to overlay on grid cell boundaries */
.monaco-sash {
    position: absolute !important;
    z-index: 100;
    background: transparent;
}

.monaco-sash.vertical {
    top: 0;
    height: 100%;
    width: 8px;
    cursor: col-resize;
}

.monaco-sash.horizontal {
    width: 100%;
    height: 8px;
    cursor: row-resize;
}

.monaco-sash#sidebar-resize {
    left: calc(var(--sidebar-width) - 4px);
}

.monaco-sash#auxiliary-resize {
    right: calc(var(--auxiliarybar-width) - 4px);
}

/* Horizontal sash to resize bottom panel */
.monaco-sash#panel-resize {
    left: var(--sidebar-width);
    right: var(--auxiliarybar-width);
    bottom: var(--panel-height, 240px);
    top: auto;
    width: auto;
}

/* Sash hover/active visual feedback */
.monaco-sash::before {
    content: '';
    position: absolute;
    background: var(--vscode-focusBorder, #1f6feb);
    opacity: 0;
    transition: opacity 0.15s ease;
    border-radius: 1px;
}

.monaco-sash.vertical::before {
    top: 0;
    bottom: 0;
    left: 3px;
    width: 2px;
}

.monaco-sash.horizontal::before {
    left: 0;
    right: 0;
    top: 3px;
    height: 2px;
}

.monaco-sash:hover::before,
.monaco-sash.active::before {
    opacity: 1;
}

/* During drag, change cursor on whole document */
body.sash-dragging {
    cursor: col-resize !important;
    user-select: none !important;
}

body.sash-dragging * {
    cursor: col-resize !important;
}

body.sash-horizontal-dragging {
    cursor: row-resize !important;
}

body.sash-horizontal-dragging * {
    cursor: row-resize !important;
}

body.panel-hidden .monaco-sash#panel-resize {
    bottom: 0;
}

body.aux-hidden .monaco-sash#panel-resize {
    right: 0;
}

body.aux-hidden .monaco-sash#auxiliary-resize {
    display: none;
}

/* ===== MONACO WORKBENCH FORCED COLOR ADJUST ===== */
.monaco-workbench {
    forced-color-adjust: none;
}

/* ===== INTRO.JS TOUR CUSTOMIZATION ===== */
.introjs-tooltip {
    background: var(--vscode-editorWidget-background) !important;
    border: 1px solid var(--vscode-focusBorder) !important;
    border-radius: 12px !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(31, 111, 235, 0.2) !important;
    padding: 20px !important;
}

.introjs-tooltip::before {
    content: '' !important;
    position: absolute !important;
    top: -2px !important;
    left: -2px !important;
    right: -2px !important;
    bottom: -2px !important;
    background: linear-gradient(135deg, rgba(31, 111, 235, 0.1), rgba(139, 92, 246, 0.1)) !important;
    border-radius: 12px !important;
    z-index: -1 !important;
    opacity: 0.5 !important;
}

.introjs-tooltiptext {
    color: var(--vscode-editor-foreground) !important;
}

.introjs-tooltip-title {
    color: var(--vscode-editor-foreground) !important;
    font-size: 16px !important;
    font-weight: 600 !important;
}

.introjs-button {
    background: var(--vscode-button-background) !important;
    color: var(--vscode-button-foreground) !important;
    border: none !important;
    text-shadow: none !important;
    font-weight: 600 !important;
}

.introjs-button:hover {
    background: var(--vscode-button-hoverBackground) !important;
}

.introjs-skipbutton {
    color: var(--vscode-statusBar-foreground) !important;
}

.introjs-skipbutton:hover {
    color: var(--vscode-editor-foreground) !important;
}

.introjs-bullets ul li a {
    background: var(--vscode-sideBar-border) !important;
}

.introjs-bullets ul li a.active {
    background: var(--vscode-button-background) !important;
}

.introjs-progressbar {
    background: var(--vscode-button-background) !important;
}

.introjs-progress {
    background: var(--vscode-sideBar-background) !important;
}

.introjs-helperLayer {
    background: rgba(0, 0, 0, 0.7) !important;
    border: 2px solid var(--vscode-focusBorder) !important;
    box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.6) !important;
}

/* ===== MOBILE RESPONSIVE STYLES ===== */

/* Mobile breakpoint variables */
:root {
    --mobile-breakpoint: 768px;
    --tablet-breakpoint: 1024px;
    --mobile-padding: 12px;
    --mobile-tap-target: 44px;
    --mobile-titlebar-height: 48px;
}

/* Hamburger menu button */
.mobile-hamburger {
    display: none;
    position: static;
    z-index: 1001;
    width: var(--mobile-tap-target);
    height: var(--mobile-tap-target);
    background: transparent;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    padding: 0;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.mobile-hamburger .codicon {
    font-size: 20px;
    color: var(--vscode-editor-foreground);
}

/* ===== MOBILE NAVIGATION DRAWER (Google-style) ===== */
.mobile-nav-drawer {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 280px;
    max-width: 85vw;
    height: 100vh;
    background: var(--vscode-sideBar-background, #252526);
    z-index: 2000;
    transform: translateX(-100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    flex-direction: column;
    box-shadow: 4px 0 20px rgba(0, 0, 0, 0.5);
}

.mobile-nav-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 1999;
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
}

body.mobile-nav-open .mobile-nav-drawer {
    transform: translateX(0);
}

body.mobile-nav-open .mobile-nav-overlay {
    display: block;
    opacity: 1;
    pointer-events: auto;
}

/* Nav drawer header */
.mobile-nav-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 16px 12px;
    border-bottom: 1px solid var(--vscode-sideBar-border, #3c3c3c);
}

.mobile-nav-brand {
    display: flex;
    align-items: center;
    gap: 10px;
}

.mobile-nav-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--vscode-editor-foreground, #cccccc);
}

.mobile-nav-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    background: transparent;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    color: var(--vscode-editor-foreground, #cccccc);
    transition: background 0.15s ease;
}

.mobile-nav-close:hover {
    background: rgba(255, 255, 255, 0.1);
}

.mobile-nav-close .codicon {
    font-size: 18px;
}

/* Nav content */
.mobile-nav-content {
    flex: 1;
    overflow-y: auto;
    padding: 8px 0;
}

.mobile-nav-section {
    margin-bottom: 8px;
}

.mobile-nav-section-title {
    padding: 12px 16px 8px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--vscode-statusBar-foreground, #888);
}

.mobile-nav-items {
    list-style: none;
    margin: 0;
    padding: 0;
}

.mobile-nav-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 20px;
    color: var(--vscode-editor-foreground, #cccccc);
    text-decoration: none;
    font-size: 14px;
    transition: background 0.15s ease;
    cursor: pointer;
}

.mobile-nav-item:hover {
    background: rgba(255, 255, 255, 0.05);
}

.mobile-nav-item:active {
    background: rgba(255, 255, 255, 0.1);
}

.mobile-nav-item.disabled {
    opacity: 0.4;
    pointer-events: none;
}

.mobile-nav-item .codicon {
    font-size: 18px;
    opacity: 0.8;
}

.mobile-nav-item-label {
    flex: 1;
}

.mobile-nav-badge {
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    padding: 2px 6px;
    border-radius: 10px;
    background: var(--status-info, #3794ff);
    color: white;
}

/* Nav footer */
.mobile-nav-footer {
    padding: 16px;
    border-top: 1px solid var(--vscode-sideBar-border, #3c3c3c);
}

.mobile-nav-version {
    font-size: 11px;
    color: var(--vscode-statusBar-foreground, #888);
}

/* Mobile sidebar drawer (legacy) */
.mobile-sidebar-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    z-index: 999;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.mobile-sidebar-overlay.active {
    opacity: 1;
}

/* Bottom sheet drawer */
.mobile-bottom-sheet {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--vscode-sideBar-background);
    border-top: 1px solid var(--vscode-sideBar-border);
    border-radius: 16px 16px 0 0;
    z-index: 998;
    max-height: 70vh;
    transform: translateY(calc(100% - 48px));
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    touch-action: none;
}

.mobile-bottom-sheet.expanded {
    transform: translateY(0);
}

.mobile-bottom-sheet-handle {
    width: 40px;
    height: 4px;
    background: var(--vscode-sideBar-border);
    border-radius: 2px;
    margin: 12px auto;
    cursor: grab;
}

.mobile-bottom-sheet-handle:active {
    cursor: grabbing;
}

.mobile-bottom-sheet-tabs {
    display: flex;
    gap: 4px;
    padding: 0 16px 12px;
    border-bottom: 1px solid var(--vscode-sideBar-border);
    overflow-x: auto;
    scrollbar-width: none;
}

.mobile-bottom-sheet-tabs::-webkit-scrollbar {
    display: none;
}

.mobile-bottom-sheet-tab {
    flex-shrink: 0;
    padding: 6px 12px;
    font-size: 11px;
    text-transform: uppercase;
    background: transparent;
    border: none;
    color: var(--vscode-statusBar-foreground);
    cursor: pointer;
    border-radius: 4px;
    font-weight: 600;
    letter-spacing: 0.5px;
}

.mobile-bottom-sheet-tab.active {
    background: var(--vscode-list-activeSelectionBackground);
    color: var(--vscode-editor-foreground);
}

.mobile-bottom-sheet-content {
    padding: 16px;
    overflow-y: auto;
    max-height: calc(70vh - 100px);
}

/* Mobile bottom panel FAB */
.mobile-panel-fab {
    display: none;
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 56px;
    height: 56px;
    background: var(--vscode-button-background);
    border: none;
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    cursor: pointer;
    z-index: 997;
    align-items: center;
    justify-content: center;
}

.mobile-panel-fab .codicon {
    font-size: 24px;
    color: var(--vscode-button-foreground);
}

.mobile-panel-fab:hover {
    background: var(--vscode-button-hoverBackground);
}

/* Mobile panel modal */
.mobile-panel-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    z-index: 1001;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.mobile-panel-modal.active {
    opacity: 1;
}

.mobile-panel-modal-content {
    background: var(--vscode-editor-background);
    border: 1px solid var(--vscode-sideBar-border);
    border-radius: 12px;
    width: 90%;
    max-width: 500px;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
}

.mobile-panel-modal-header {
    padding: 16px;
    border-bottom: 1px solid var(--vscode-sideBar-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.mobile-panel-modal-body {
    padding: 16px;
    overflow-y: auto;
    flex: 1;
}

/* Tablet breakpoint (768px - 1023px) */
@media (max-width: 1023px) and (min-width: 768px) {
    :root {
        --sidebar-width: 250px;
        --auxiliarybar-width: 0px;
    }
    
    body {
        --auxiliarybar-width: 0px;
    }
    
    /* Hide auxiliary bar on tablet, keep activity bar */
    .part.auxiliarybar {
        display: none;
    }
    
    .monaco-sash#auxiliary-resize {
        display: none;
    }
    
    /* Adjust grid for tablet */
    .split-view-container,
    .monaco-grid-view,
    .workbench {
        grid-template-columns: var(--activitybar-width) var(--sidebar-width) 1fr 0px;
    }
    
    .monaco-sash#panel-resize {
        right: 0;
    }
}

/* Mobile breakpoint (<768px) */
@media (max-width: 767px) {
    :root {
        --titlebar-height: var(--mobile-titlebar-height);
        --mobile-padding: 12px;
    }
    
    /* Show mobile hamburger */
    .mobile-hamburger {
        display: flex;
    }
    
    /* Show mobile nav drawer (but hidden by transform until opened) */
    .mobile-nav-drawer {
        display: flex;
    }
    
    .mobile-nav-overlay {
        display: block;
    }
    
    /* Hide activity bar on mobile */
    .part.activitybar {
        display: none;
    }
    
    /* Show overlay when sidebar is open */
    body.mobile-sidebar-open .mobile-sidebar-overlay {
        display: block;
        opacity: 1;
    }
    
    /* Hide auxiliary bar, show as bottom sheet */
    .part.auxiliarybar {
        display: none;
    }
    
    .mobile-bottom-sheet {
        /* Keep hidden by default on mobile - user must explicitly open */
        display: none;
    }
    
    /* Hide bottom panel, show FAB */
    .part.panel {
        display: none;
    }
    
    .mobile-panel-fab {
        display: flex;
    }
    
    /* Mobile layout - force all sidebar widths to 0 */
    :root {
        --activitybar-width: 0px;
        --sidebar-width: 0px;
        --auxiliarybar-width: 0px;
    }
    
    /* Ensure full height for mobile */
    html, body {
        height: 100vh;
        overflow: hidden;
    }
    
    #app {
        height: 100vh;
        display: flex;
        flex-direction: column;
    }
    
    /* Adjust main grid for mobile - single column only */
    .split-view-container,
    .monaco-grid-view,
    .workbench {
        grid-template-columns: 100% !important;
        grid-template-rows: 100% !important;
        flex: 1;
        min-height: 0;
    }
    
    /* Hide activity bar and auxiliary (using hamburger menu instead) */
    .part.activitybar,
    .part.auxiliarybar {
        display: none !important;
    }
    
    /* Sidebar is hidden by transform, not display, so it can slide in */
    .part.sidebar {
        display: block !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        width: 80% !important;
        max-width: 320px !important;
        height: 100vh !important;
        z-index: 1000 !important;
        transform: translateX(-100%);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 4px 0 12px rgba(0, 0, 0, 0.5);
        background: var(--vscode-sideBar-background, #252526) !important;
    }
    
    /* Slide sidebar in when open (use sidebar-hidden for consistency) */
    body:not(.sidebar-hidden) .part.sidebar {
        transform: translateX(0) !important;
    }

    /* Auxiliarybar positioned off-screen to the right, slides in when opened */
    .part.auxiliarybar {
        display: block !important;
        position: fixed !important;
        top: 0 !important;
        right: 0 !important;
        width: 85% !important;
        max-width: 350px !important;
        height: 100vh !important;
        z-index: 1000 !important;
        transform: translateX(100%);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: -4px 0 12px rgba(0, 0, 0, 0.5);
        background: var(--vscode-sideBar-background, #252526) !important;
    }
    
    /* Slide auxiliarybar in when open */
    body:not(.aux-hidden) .part.auxiliarybar {
        transform: translateX(0) !important;
    }

    /* Editor must be visible and fill entire space */
    .part.editor {
        display: block !important;
        grid-column: 1 !important;
        grid-row: 1 !important;
        width: 100% !important;
        min-width: 100% !important;
    }
    
    /* Hide all sashes on mobile */
    .monaco-sash {
        display: none !important;
    }
    
    /* Editor area must be visible and fill space */
    .editor-area {
        display: flex !important;
        flex-direction: column;
        min-height: 0;
        height: 100%;
    }
    
    #editor-area {
        flex: 1;
        min-height: 0;
        overflow-y: auto;
    }
    
    /* Titlebar adjustments */
    .titlebar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 6px 12px;
        min-height: var(--mobile-titlebar-height);
        gap: 8px;
    }
    
    .titlebar > div:first-child {
        display: flex;
        align-items: center;
        gap: 8px;
        flex: 1;
        min-width: 0;
    }
    
    .titlebar > div:last-child {
        display: flex;
        align-items: center;
        gap: 6px;
        flex-shrink: 0;
    }
    
    .titlebar .title-text {
        font-size: 12px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        flex: 1;
        min-width: 0;
    }
    
    /* Scenario selector - better width on mobile */
    .scenario-selector {
        margin-left: 0 !important;
        padding: 2px 6px !important;
        gap: 4px !important;
        flex-shrink: 0;
    }
    
    .scenario-selector-label {
        display: none !important;
    }
    
    .scenario-selector select {
        font-size: 12px !important;
        padding: 6px 24px 6px 8px !important;
        min-width: 100px !important;
        max-width: 140px !important;
        height: 32px;
        line-height: 1.2;
    }

    /* Hide specification button text on mobile */
    .title-actions-button span:not(.codicon) {
        display: none;
    }
    
    .title-actions-button {
        padding: 4px !important;
        min-width: var(--mobile-tap-target);
        min-height: var(--mobile-tap-target);
    }
    
    /* Timeline bar mobile layout */
    .timeline-bar {
        flex-wrap: wrap;
        padding: 10px 12px;
        gap: 10px;
        align-items: center;
    }
    
    .timeline-controls {
        flex: 1 1 100%;
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 8px;
        order: 1;
        padding: 0;
    }
    
    /* Timeline buttons - uniform sizing */
    .timeline-controls button,
    .timeline-controls .monaco-select,
    .timeline-controls select {
        min-width: 36px !important;
        min-height: 32px !important;
        max-height: 32px !important;
        height: 32px !important;
        padding: 6px 10px !important;
        border-radius: 4px !important;
        font-size: 13px !important;
        line-height: 1.2 !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Noto Sans", Helvetica, Arial, sans-serif !important;
    }
    
    .timeline-controls button {
        padding: 6px 8px !important;
    }
    
    /* Timeline time display - matching height */
    .timeline-controls > span,
    #timeline-time {
        padding: 6px 10px !important;
        font-size: 13px !important;
        font-weight: 500;
        line-height: 1.2 !important;
        min-height: 32px !important;
        max-height: 32px !important;
        height: 32px !important;
        display: flex !important;
        align-items: center !important;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace !important;
    }
    
    #timeline-play {
        min-width: 36px !important;
        min-height: 32px !important;
        max-height: 32px !important;
        height: 32px !important;
        padding: 6px 8px !important;
        font-size: 16px !important;
    }
    
    #timeline-play .codicon {
        font-size: 16px;
    }
    
    #timeline-time {
        font-size: 13px !important;
        min-width: 110px !important;
        min-height: 32px !important;
        padding: 6px 10px !important;
    }
    
    #timeline-speed {
        min-height: 32px !important;
        max-height: 32px !important;
        height: 32px !important;
        font-size: 13px !important;
        padding: 6px 10px !important;
        min-width: 50px !important;
    }
    
    /* Loop checkbox label */
    label[for="timeline-loop"],
    .timeline-controls label {
        display: flex !important;
        align-items: center !important;
        gap: 6px !important;
        font-size: 13px !important;
        color: var(--vscode-statusBar-foreground) !important;
        cursor: pointer !important;
        min-height: 32px !important;
        padding: 0 4px !important;
    }
    
    input[type="checkbox"] {
        width: 18px !important;
        height: 18px !important;
        cursor: pointer !important;
    }
    
    #timeline-scrubber {
        order: 10;
        flex: 1 1 100%;
        min-height: 40px;
        margin: 4px 0 0 0;
    }
    
    .scrubber-handle {
        width: 28px !important;
        height: 48px !important;
        top: -12px !important;
    }
    
    .timeline-bar > div:not(.timeline-controls):not(#timeline-scrubber) {
        order: 5;
        font-size: 11px;
    }
    
    /* Scenario selector mobile */
    .monaco-select,
    select {
        font-size: 12px;
        padding: 8px;
        min-height: var(--mobile-tap-target);
    }
    
    /* Page container mobile */
    .page-container {
        padding: var(--mobile-padding);
        max-width: 100%;
    }
    
    .page-container h1 {
        font-size: 14px !important;
        margin-bottom: 8px !important;
        line-height: 1.2 !important;
    }
    
    /* Map header row - Decision Envelopes header with View As dropdown */
    .page-container > div:first-child {
        display: flex !important;
        flex-direction: row !important;
        align-items: center !important;
        gap: 8px !important;
        margin-bottom: 16px !important;
        flex-wrap: wrap !important;
    }
    
    /* Left section with icon, title, and tour button */
    .page-container > div:first-child > div:first-child {
        display: flex !important;
        align-items: center !important;
        gap: 8px !important;
        flex: 1 !important;
        min-width: 0 !important;
    }
    
    /* Icon size */
    .page-container > div:first-child > div:first-child .codicon {
        font-size: 16px !important;
        flex-shrink: 0 !important;
    }
    
    /* Title container */
    .page-container > div:first-child > div:first-child > div {
        flex: 0 1 auto !important;
        min-width: 0 !important;
    }
    
    /* Title text */
    .page-container > div:first-child > div:first-child > div h1 {
        font-size: 13px !important;
        white-space: nowrap !important;
        overflow: hidden !important;
        text-overflow: ellipsis !important;
    }
    
    /* Tour button container */
    #tour-button-container {
        flex-shrink: 0 !important;
    }
    
    /* Tour button itself */
    #tour-button-container button {
        padding: 4px 8px !important;
        font-size: 11px !important;
        min-height: 28px !important;
        white-space: nowrap !important;
    }
    
    /* View As section - compact on same row */
    .page-container > div:first-child > div:last-child {
        display: flex !important;
        align-items: center !important;
        gap: 6px !important;
        flex-shrink: 0 !important;
    }
    
    /* View As label */
    .page-container > div:first-child > div:last-child > div:first-child {
        font-size: 9px !important;
        margin-bottom: 0 !important;
        white-space: nowrap !important;
        color: var(--vscode-statusBar-foreground) !important;
    }
    
    /* View As dropdown */
    #steward-filter {
        min-width: 140px !important;
        padding: 6px 8px !important;
        font-size: 12px !important;
        min-height: 32px !important;
        height: 32px !important;
    }
    
    .page-header {
        padding: var(--mobile-padding) !important;
        margin-bottom: 12px !important;
        min-height: 32px !important;
        gap: 8px !important;
    }
    
    .page-header h1 {
        font-size: 14px !important;
        line-height: 1.2 !important;
    }
    
    /* Hide explain button text on mobile, show only icon */
    .tour-button .tour-button-text {
        display: none !important;
    }
    
    .tour-button {
        padding: 6px 8px !important;
        font-size: 16px !important;
        min-width: 32px !important;
        min-height: 32px !important;
        gap: 0 !important;
    }
    
    .tour-button .codicon {
        font-size: 16px !important;
    }
    
    /* Hide generate narrative button text on mobile, show only icon */
    #generate-ai-narrative .generate-narrative-text {
        display: none !important;
    }
    
    #generate-ai-narrative {
        padding: 6px 8px !important;
        min-width: 32px !important;
        min-height: 32px !important;
        gap: 0 !important;
    }
    
    #generate-ai-narrative .codicon {
        font-size: 16px !important;
    }
    
    /* Hide generate scenario button text on mobile, show only icon */
    .scenario-gen-button .scenario-gen-button-text {
        display: none !important;
    }
    
    .scenario-gen-button {
        padding: 6px 8px !important;
        min-width: 32px !important;
        min-height: 32px !important;
        gap: 0 !important;
    }
    
    .scenario-gen-button .codicon {
        font-size: 16px !important;
    }
    
    /* Ensure steward filter dropdown fits properly */
    #steward-filter {
        font-size: 12px !important;
        padding: 6px 24px 6px 8px !important;
        min-height: 32px !important;
        max-width: 140px !important;
    }
    
    /* HDDL Map mobile - ensure visibility */
    #hddl-map-container {
        width: 100%;
        margin-bottom: 16px;
    }
    
    #hddl-map-container svg {
        max-width: 100%;
        height: auto;
    }
    
    /* Better button formatting on mobile */
    button,
    .monaco-button {
        padding: 10px 16px !important;
        border-radius: 6px !important;
        font-size: 14px !important;
        min-height: var(--mobile-tap-target) !important;
    }
    
    /* Dropdown/select better formatting */
    select,
    .monaco-select {
        padding: 10px 32px 10px 12px !important;
        border-radius: 6px !important;
        font-size: 14px !important;
        min-height: var(--mobile-tap-target) !important;
        max-width: 100%;
    }
    
    /* Tour modal sizing */
    .tour-modal {
        max-width: 90vw !important;
        max-height: 70vh !important;
        padding: 16px !important;
    }
    
    .tour-modal h2 {
        font-size: 18px !important;
        margin-bottom: 12px !important;
    }
    
    .tour-modal p {
        font-size: 14px !important;
        line-height: 1.5 !important;
    }
    
    .tour-modal button {
        padding: 12px 20px !important;
        font-size: 14px !important;
    }
    
    /* Statusbar mobile */
    .part.statusbar {
        font-size: 11px;
    }
    
    .statusbar-item {
        padding: 4px 8px;
    }
}

/* Very small mobile screens (<400px) */
@media (max-width: 399px) {
    /* Force single column for grids */
    .cards-grid,
    .envelope-grid,
    .fleet-grid {
        grid-template-columns: 1fr !important;
    }
    
    .titlebar .title-text {
        max-width: 100px;
    }
    
    /* Make timeline even more compact */
    .timeline-bar {
        padding: 4px;
    }
    
    #timeline-time {
        min-width: 80px;
        font-size: 11px;
    }
}

/* Landscape mobile orientation */
@media (max-width: 915px) and (orientation: landscape) {
    /* Show sidebar alongside content in landscape */
    .part.sidebar {
        position: static;
        transform: none;
        width: 250px;
        box-shadow: none;
    }
    
    .split-view-container,
    .monaco-grid-view,
    .workbench {
        grid-template-columns: 250px 1fr;
    }
    
    .mobile-sidebar-overlay {
        display: none !important;
    }
    
    .mobile-hamburger {
        display: none;
    }
}

/* Touch improvements for all mobile devices */
@media (hover: none) and (pointer: coarse) {
    /* Increase all interactive element sizes for touch */
    button,
    a,
    .monaco-list-row,
    .nav-item,
    .codicon {
        min-width: var(--mobile-tap-target);
        min-height: var(--mobile-tap-target);
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }
    
    /* Remove hover effects on touch devices */
    *:hover {
        transition: none;
    }
    
    /* Improve scrolling performance */
    * {
        -webkit-overflow-scrolling: touch;
    }
}

/* ===== RESIZABLE PANEL SASH ===== */

/* Sash base styles */
.sash {
    position: relative;
    flex-shrink: 0;
    background: transparent;
    z-index: 100;
    transition: background var(--transition-fast, 100ms ease-out);
}

.sash-vertical {
    width: var(--sash-size, 4px);
    height: 100%;
    cursor: col-resize;
}

.sash-horizontal {
    width: 100%;
    height: var(--sash-size, 4px);
    cursor: row-resize;
}

/* Sash indicator line */
.sash-indicator {
    position: absolute;
    background: var(--sash-color, transparent);
    transition: background var(--transition-fast, 100ms ease-out);
}

.sash-vertical .sash-indicator {
    top: 0;
    bottom: 0;
    left: 50%;
    width: 1px;
    transform: translateX(-50%);
}

.sash-horizontal .sash-indicator {
    left: 0;
    right: 0;
    top: 50%;
    height: 1px;
    transform: translateY(-50%);
}

/* Sash hover state */
.sash:hover .sash-indicator,
.sash:focus .sash-indicator,
.sash.active .sash-indicator {
    background: var(--sash-hover-color, var(--interactive-focus, #1f6feb));
}

.sash:hover,
.sash:focus {
    outline: none;
}

.sash-vertical:hover,
.sash-vertical:focus,
.sash-vertical.active {
    width: var(--sash-hover-size, 8px);
    margin-left: calc((var(--sash-size, 4px) - var(--sash-hover-size, 8px)) / 2);
    margin-right: calc((var(--sash-size, 4px) - var(--sash-hover-size, 8px)) / 2);
}

.sash-horizontal:hover,
.sash-horizontal:focus,
.sash-horizontal.active {
    height: var(--sash-hover-size, 8px);
    margin-top: calc((var(--sash-size, 4px) - var(--sash-hover-size, 8px)) / 2);
    margin-bottom: calc((var(--sash-size, 4px) - var(--sash-hover-size, 8px)) / 2);
}

/* Dragging state */
body.sash-dragging {
    cursor: col-resize !important;
    user-select: none !important;
}

body.sash-dragging * {
    cursor: col-resize !important;
    user-select: none !important;
}

body.sash-dragging .sash-horizontal,
body.sash-dragging.sash-horizontal-dragging {
    cursor: row-resize !important;
}

body.sash-dragging.sash-horizontal-dragging * {
    cursor: row-resize !important;
}

/* Ghost line during drag */
.sash-ghost-line {
    pointer-events: none;
    opacity: 0.8;
    box-shadow: 0 0 8px var(--interactive-focus, #1f6feb);
}

/* Panel collapsed state */
.part.collapsed {
    overflow: hidden;
}

.part.collapsed > * {
    opacity: 0;
    pointer-events: none;
}

.part.collapsed > .sash {
    opacity: 1;
    pointer-events: auto;
}

/* Sash positioning for different panels */
.sash[data-panel="sidebar"] {
    grid-column: 3;
    grid-row: 1 / -1;
    justify-self: start;
    margin-left: -2px;
}

.sash[data-panel="auxiliary"] {
    grid-column: 3;
    grid-row: 1 / -1;
    justify-self: end;
    margin-right: -2px;
}

/* Hide sashes on mobile */
@media (max-width: 768px) {
    .sash {
        display: none !important;
    }
}

/* Touch-friendly sash for tablets */
@media (hover: none) and (pointer: coarse) and (min-width: 769px) {
    .sash-vertical {
        width: 12px;
    }
    
    .sash-horizontal {
        height: 12px;
    }
    
    .sash:hover,
    .sash:focus,
    .sash.active {
        margin: 0;
    }
}

/* ===== LAYOUT SELECTOR ===== */

.layout-selector {
    position: relative;
    display: inline-flex;
    align-items: center;
}

.layout-selector-button {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    background: transparent;
    border: 1px solid transparent;
    border-radius: var(--radius-sm, 3px);
    color: var(--status-warning, #d29922);
    font-size: var(--text-xs, 11px);
    cursor: pointer;
    transition: all var(--transition-fast, 100ms ease-out);
}

.layout-selector-button:hover {
    background: var(--interactive-hover, rgba(255, 255, 255, 0.05));
    border-color: var(--surface-border, var(--vscode-sideBar-border));
    color: var(--status-warning, #d29922);
}

.layout-selector-button[aria-expanded="true"] {
    background: var(--interactive-active, var(--vscode-list-activeSelectionBackground));
    border-color: var(--interactive-focus, var(--vscode-focusBorder));
}

.layout-selector-label {
    display: none;
}

@media (min-width: 900px) {
    .layout-selector-label {
        display: inline;
    }
}

.layout-selector-dropdown {
    position: fixed;
    bottom: var(--statusbar-height, 24px);
    right: 12px;
    z-index: 999999;
    min-width: 220px;
    max-width: 320px;
    padding: var(--space-2, 8px);
    background: var(--surface-2, var(--vscode-editorWidget-background, #252526));
    border: 1px solid var(--surface-border, var(--vscode-sideBar-border, #3c3c3c));
    border-radius: var(--radius-md, 6px);
    box-shadow: var(--shadow-lg, 0 8px 24px rgba(0, 0, 0, 0.4));
}

.layout-selector-dropdown[hidden] {
    display: none;
}

.layout-selector-header {
    padding: var(--space-2, 8px) var(--space-2, 8px) var(--space-1, 4px);
    font-size: var(--text-xs, 11px);
    font-weight: var(--font-semibold, 600);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-tertiary, var(--vscode-statusBar-foreground));
}

.layout-selector-presets {
    display: flex;
    flex-direction: column;
    gap: var(--space-1, 4px);
    padding-bottom: var(--space-2, 8px);
    border-bottom: 1px solid var(--surface-border-subtle, rgba(48, 54, 61, 0.5));
    margin-bottom: var(--space-2, 8px);
}

.layout-preset-item {
    display: flex;
    align-items: center;
    gap: var(--space-2, 8px);
    padding: var(--space-2, 8px) var(--space-3, 12px);
    background: transparent;
    border: none;
    border-radius: var(--radius-sm, 3px);
    color: var(--text-primary, var(--vscode-editor-foreground));
    font-size: var(--text-sm, 12px);
    text-align: left;
    cursor: pointer;
    transition: background var(--transition-fast, 100ms ease-out);
}

.layout-preset-item:hover {
    background: var(--interactive-hover, rgba(255, 255, 255, 0.05));
}

.layout-preset-item.active {
    background: var(--interactive-selected, rgba(31, 111, 235, 0.15));
}

.layout-preset-item .preset-name {
    flex: 1;
}

.layout-preset-item .preset-badge {
    padding: 2px 6px;
    background: var(--status-info-subtle, rgba(88, 166, 255, 0.15));
    border-radius: var(--radius-full, 9999px);
    font-size: var(--text-2xs, 9px);
    font-weight: var(--font-medium, 500);
    color: var(--status-info, #58a6ff);
}

.layout-preset-item .codicon-check {
    color: var(--status-success, #3fb950);
}

.layout-selector-actions {
    display: flex;
    flex-direction: column;
    gap: var(--space-1, 4px);
}

.layout-action-item {
    display: flex;
    align-items: center;
    gap: var(--space-2, 8px);
    padding: var(--space-2, 8px) var(--space-3, 12px);
    background: transparent;
    border: none;
    border-radius: var(--radius-sm, 3px);
    color: var(--text-secondary, var(--vscode-statusBar-foreground));
    font-size: var(--text-sm, 12px);
    text-align: left;
    cursor: pointer;
    transition: all var(--transition-fast, 100ms ease-out);
}

.layout-action-item:hover {
    background: var(--interactive-hover, rgba(255, 255, 255, 0.05));
    color: var(--text-primary, var(--vscode-editor-foreground));
}

/* Hide layout selector on mobile */
@media (max-width: 768px) {
    .layout-selector {
        display: none;
    }
}
/* ===== LAYOUT ORCHESTRATOR MODES ===== */
/* These classes are applied by the LayoutOrchestrator based on breakpoints */

/* Wide mode (>1400px) - all panels visible */
.layout-wide .part.sidebar,
.layout-wide .part.auxiliarybar {
    display: flex;
}

/* Standard mode (1200-1400px) - hide auxiliary */
.layout-standard .part.auxiliarybar {
    display: none;
}

.layout-standard .monaco-workbench {
    grid-template-columns: var(--activitybar-width) var(--sidebar-width) 1fr;
}

/* Narrow mode (900-1200px) - sidebar collapsed to icons */
.layout-narrow .part.sidebar {
    width: var(--activitybar-width);
    min-width: var(--activitybar-width);
    max-width: var(--activitybar-width);
}

.layout-narrow .part.sidebar .composite.title,
.layout-narrow .part.sidebar .sidebar-header,
.layout-narrow .part.sidebar .content,
.layout-narrow .part.sidebar .sidebar-content {
    display: none;
}

.layout-narrow .part.auxiliarybar {
    display: none;
}

.layout-narrow .monaco-workbench {
    grid-template-columns: var(--activitybar-width) var(--activitybar-width) 1fr;
}

/* Mobile mode (768-900px) - no sidebars */
.layout-mobile .part.sidebar,
.layout-mobile .part.auxiliarybar {
    display: none;
}

.layout-mobile .part.activitybar {
    display: none;
}

.layout-mobile .monaco-workbench {
    grid-template-columns: 1fr;
}

/* Compact mode (<768px) - ultra-compact */
.layout-compact .part.sidebar,
.layout-compact .part.auxiliarybar,
.layout-compact .part.activitybar {
    display: none;
}

.layout-compact .monaco-workbench {
    grid-template-columns: 1fr;
}

.layout-compact .titlebar {
    padding: 0 8px;
}

.layout-compact .timeline-bar {
    padding: 0 8px;
}

/* Sidebar collapsed state (icon-only mode) */
body.sidebar-collapsed .part.sidebar {
    width: var(--activitybar-width);
    min-width: var(--activitybar-width);
    max-width: var(--activitybar-width);
    transition: width 0.2s ease;
}

body.sidebar-collapsed .part.sidebar .composite.title,
body.sidebar-collapsed .part.sidebar .sidebar-header,
body.sidebar-collapsed .part.sidebar .content,
body.sidebar-collapsed .part.sidebar .sidebar-content {
    opacity: 0;
    pointer-events: none;
}

/* Smooth transitions for layout changes */
.part.sidebar,
.part.auxiliarybar,
.part.activitybar {
    transition: 
        width 0.2s ease,
        min-width 0.2s ease,
        max-width 0.2s ease,
        opacity 0.2s ease;
}

/* Layout Highlight Arrow */
@keyframes bounce-horizontal {
    0%, 100% { transform: translateX(0); }
    50% { transform: translateX(4px); }
}

.layout-highlight-arrow {
    position: absolute;
    right: 100%;
    top: 50%;
    margin-top: -8px; /* Half of height */
    margin-right: 8px;
    color: var(--status-info);
    font-size: 16px;
    animation: bounce-horizontal 1.5s infinite ease-in-out;
    pointer-events: none;
    display: flex;
    align-items: center;
    z-index: 100;
}

/* ===== MOBILE RESPONSIVENESS ===== */

/* Tablet and below: Adjust panel widths and peek handles */
@media (max-width: 1024px) {
    :root {
        --sidebar-width: 280px;
        --auxiliarybar-width: 300px;
    }
    
    /* Slightly wider peek handles for easier touch targets */
    .sidebar-peek,
    .aux-peek {
        width: 36px;
        gap: 10px;
    }
    
    .sidebar-peek:hover,
    .aux-peek:hover {
        width: 40px;
    }
    
    .sidebar-peek .codicon,
    .aux-peek .codicon {
        font-size: 18px;
    }
    
    /* Don't override panel visibility on tablet - respect collapsed state */
    .part.sidebar,
    .part.auxiliarybar {
        position: absolute;
    }
}

/* Mobile: Stack panels and use overlay behavior */
@media (max-width: 768px) {
    :root {
        --sidebar-width: 100%;
        --auxiliarybar-width: 100%;
    }
    
    /* Hide panels when collapsed */
    body.sidebar-hidden .part.sidebar,
    body.aux-hidden .part.auxiliarybar {
        display: none;
    }
    
    /* Make panels overlay the main editor on mobile when visible */
    body:not(.sidebar-hidden) .part.sidebar,
    body:not(.aux-hidden) .part.auxiliarybar {
        position: fixed !important;
        width: 85vw !important;
        max-width: 320px;
        height: 100vh !important;
        top: 0 !important;
        bottom: 0 !important;
        z-index: 200;
        box-shadow: 2px 0 16px rgba(0, 0, 0, 0.5);
    }
    
    body:not(.sidebar-hidden) .part.sidebar {
        left: 0 !important;
        right: auto !important;
    }
    
    body:not(.aux-hidden) .part.auxiliarybar {
        right: 0 !important;
        left: auto !important;
        box-shadow: -2px 0 16px rgba(0, 0, 0, 0.5);
    }
    
    /* Editor takes full width on mobile */
    .part.editor {
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
    }
    
    /* Peek handles larger for touch on mobile (48px min touch target) */
    .sidebar-peek,
    .aux-peek {
        width: 48px;
        gap: 12px;
    }
    
    .sidebar-peek:hover,
    .aux-peek:hover {
        width: 48px; /* No expand on mobile */
        border-width: 3px;
    }
    
    .sidebar-peek .codicon,
    .aux-peek .codicon {
        font-size: 20px;
    }
    
    .sidebar-peek__label,
    .aux-peek__label {
        font-size: 11px;
    }
    
    /* Add backdrop overlay when panels are open on mobile */
    body:not(.sidebar-hidden)::before,
    body:not(.aux-hidden)::after {
        content: '';
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 150;
        animation: fadeIn 0.2s ease;
    }
    
    body:not(.sidebar-hidden)::before {
        left: min(85vw, 320px);
    }
    
    body:not(.aux-hidden)::after {
        right: min(85vw, 320px);
    }
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* Small mobile: Full width panels */
@media (max-width: 480px) {
    body:not(.sidebar-hidden) .part.sidebar,
    body:not(.aux-hidden) .part.auxiliarybar {
        width: 100vw !important;
        max-width: 100vw;
    }
    
    body:not(.sidebar-hidden)::before,
    body:not(.aux-hidden)::after {
        display: none; /* No backdrop on small screens - full width panel */
    }
}